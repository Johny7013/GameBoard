class Autocomplete{constructor(e,t,s,o=3){if(this.source=e,this.minimalCharactersThreshold=o,this.resultSource=t,this.getUrl=s,!this.source)throw new Error("Cannot setup autocomplete on a null source.");if(!this.resultSource)throw new Error("Cannot setup autocomplete on with a null result source.");$(this.source).on("input",()=>this.showAutocompleteResults()),$(this.source).focusin(()=>this.showAutocompleteResults()),$("body").click(e=>{$.contains(this.resultSource,e.target)||this.closeAllAutocompleteResults()})}showAutocompleteResults(){const e=this.source.value;if(!e||e.length<this.minimalCharactersThreshold)return;this.closeAllAutocompleteResults();const t={input:e};$.ajax({type:"GET",url:this.getUrl,dataType:"html",data:t,success:e=>{$(this.resultSource).prepend(e);const t=$(this.resultSource).children(`.${Autocomplete.autocompleteResultsClass}`),s=t.height(),o=parseInt(t.css("top"));t.css("top",`${o-s}px`),t.mCustomScrollbar()},error:()=>{const e=document.createElement("div");$(e).addClass(`user-search-error text-danger ${Autocomplete.autocompleteResultsClass}`);const t=document.createElement("p");t.innerText="There is an issue with the search service. Please, try again later.",e.appendChild(t),$(this.resultSource).prepend(e);const s=$(e).height(),o=parseInt($(e).css("top"));console.log("Height: "+s+" default top: "+o),$(e).css("top",`${o-s}px`)}})}closeAllAutocompleteResults(){$(`.${Autocomplete.autocompleteResultsClass}`).remove()}}Autocomplete.autocompleteResultsClass="autocomplete-items";class FriendRequestPopupGenerator{getHtmlTemplate(e){return`<div class="popover rounded" role="tooltip">\n                    <div class="arrow"></div>\n                    <h3 class="popover-header ${e}"></h3>\n                    <div class="popover-body"></div>\n                </div>`}generateSuccessPopup(e,t){this.generatePopup(e,this.getHtmlTemplate("popover-header-success"),t)}generateErrorPopup(e,t){this.generatePopup(e,this.getHtmlTemplate("popover-header-error"),t)}generatePopup(e,t,s){const o=s.responseJSON;$(e).attr("title",o.title),$(e).attr("data-content",o.message),$(e).popover({trigger:"focus",template:t}),$(e).popover("show")}}const friendRequestPopupGenerator=new FriendRequestPopupGenerator;class FriendsSidebar{constructor(e,t,s,o,r){this.userSearchInput=e,this.userSearchBox=t,this.sidebarContainer=s,this.sidebar=o,this.sidebarCollapse=r,this.autocomplete=new Autocomplete(e,t,"/User/Search"),$(o).mCustomScrollbar({theme:"minimal"}),$(r).click(()=>{$(s).toggleClass("toggled"),this.toggleSidebarCollapseIcon()})}toggleSidebarCollapseIcon(){const e=$(this.sidebarCollapse).children("i");e.hasClass("fa-angle-left")?(e.removeClass("fa-angle-left"),e.addClass("fa-angle-right")):(e.removeClass("fa-angle-right"),e.addClass("fa-angle-left"))}}let friendsSidebar;$().ready(()=>{friendsSidebar=new FriendsSidebar($("#friends-sidebar-searchbox-input")[0],$("#friends-sidebar-search-box")[0],$("#friends-sidebar-container")[0],$("#friends-sidebar")[0],$("#friends-sidebar-collapse")[0])});